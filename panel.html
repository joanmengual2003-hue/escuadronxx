<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Staff</title>
    <style>
        body { background: #111; color: #fff; font-family: Arial; padding: 20px; }
        .card { background: #222; padding: 15px; margin: 10px 0; border-radius: 8px; }
        button { padding: 8px 15px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
        .aceptar { background: #4CAF50; }
        .rechazar { background: #e53935; }
        #login { max-width: 300px; margin: auto; }
    </style>
</head>
<body>

<div id="login">
    <h2>Panel Staff</h2>
    <input type="password" id="pass" placeholder="Contraseña">
    <button onclick="acceder()">Entrar</button>
</div>

<div id="panel" style="display:none;">
    <h2>Postulaciones</h2>
    <div id="lista"></div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyBCZH2bD5mZCiVDN1n_vFf8OqBRty_TLRE",
    authDomain: "escuadronx-free.firebaseapp.com",
    projectId: "escuadronx-free",
    storageBucket: "escuadronx-free.firebasestorage.app",
    messagingSenderId: "189437864760",
    appId: "1:189437864760:web:da77fd49159aa34ce02fcd"
  };

  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>

<script>
function acceder() {
    if (document.getElementById("pass").value === "EscuadronX2025") {
        document.getElementById("login").style.display = "none";
        document.getElementById("panel").style.display = "block";
        cargarPostulaciones();
    } else {
        alert("Contraseña incorrecta");
    }
}

function cargarPostulaciones() {
    db.collection("postulaciones").onSnapshot((snapshot) => {
        const lista = document.getElementById("lista");
        lista.innerHTML = "";

        snapshot.forEach((doc) => {
            const d = doc.data();

            lista.innerHTML += `
                <div class="card">
                    <h3>${d.nombre} (${d.discord})</h3>
                    <p><b>Puesto:</b> ${d.puesto}</p>
                    <p><b>Estado:</b> ${d.estado}</p>
                    <p><b>Fecha:</b> ${d.fecha}</p>

                    <button class="aceptar" onclick="actualizar('${doc.id}', 'Aceptado')">Aceptar</button>
                    <button class="rechazar" onclick="actualizar('${doc.id}', 'Rechazado')">Rechazar</button>
                </div>
            `;
        });
    });
}

function actualizar(id, estado) {
    db.collection("postulaciones").doc(id).update({ estado: estado });
}
</script>

</body>
</html>
