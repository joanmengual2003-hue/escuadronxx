<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estado de Postulaci贸n - Escuadr贸n X</title>

<style>
    body { background: #000; color: white; font-family: Arial; }
    h1 { text-align: center; color: #ff0000; }
    .box {
        max-width: 600px; margin: auto; background: #111;
        padding: 20px; border-radius: 10px; border: 1px solid #333;
        margin-top: 40px;
    }
    input {
        width: 100%; padding: 10px; margin-top: 10px;
        border-radius: 5px; border: none; background: #222; color: white;
    }
    button {
        margin-top: 15px; padding: 10px 20px; background: #ff0000;
        border: none; border-radius: 5px; cursor: pointer;
    }
    button:hover { background: #cc0000; }
    .resultado {
        margin-top: 20px; padding: 15px; background: #222;
        border-radius: 8px; border: 1px solid #444;
    }
</style>
</head>

<body>

<h1>Consulta tu Estado</h1>

<div class="box">
    <input type="text" id="discord" placeholder="Tu usuario de Discord (ej: nombre#1234)">
    <button onclick="buscar()">Consultar</button>

    <div id="resultado"></div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<script>
const firebaseConfig = {
    apiKey: "AIzaSyA22O0m0Z1vkHvElYmOpe4vZvrC3EsPyzU",
    authDomain: "escuadronx.firebaseapp.com",
    projectId: "escuadronx",
    storageBucket: "escuadronx.firebasestorage.app",
    messagingSenderId: "29439561906",
    appId: "1:29439561906:web:472dba0628860609d539ab"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
</script>

<script>
async function buscar() {
    const user = document.getElementById("discord").value.trim();
    const resultado = document.getElementById("resultado");

    if (user === "") {
        resultado.innerHTML = "<p>Escribe tu usuario de Discord.</p>";
        return;
    }

    const snapshot = await db.collection("postulaciones")
        .where("discord", "==", user)
        .get();

    if (snapshot.empty) {
        resultado.innerHTML = "<p>No se encontr贸 ninguna postulaci贸n con ese Discord.</p>";
        return;
    }

    snapshot.forEach(doc => {
        const data = doc.data();
        resultado.innerHTML = `
            <div class="resultado">
                <p><strong>Nombre:</strong> ${data.nombre}</p>
                <p><strong>Puesto:</strong> ${data.puesto}</p>
                <p><strong>Estado:</strong> ${data.estado}</p>
                <p><strong>Fecha:</strong> ${data.fecha}</p>
            </div>
        `;
    });
}
</script>

</body>
</html>
